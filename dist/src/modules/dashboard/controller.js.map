{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../../../src/modules/dashboard/controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,uDAAgD;AAChD,+BAA8B;AAE9B,SAAgB,WAAW;IAC1B,6DAA6D;IAC7D,OAAO,UAAiB,CAAsC;;;;;;;wBAG7C,qBAAM,OAAE,CAAC,MAAM,CAAC,IAAI,CAAE,EAAE,CAAE,CAAC,IAAI,CAAE,EAAE,SAAS,EAAE,MAAM,EAAE,CAAE,EAAA;;wBAAjE,MAAM,GAAG,SAAwD;wBACpD,qBAAM,OAAE,CAAC,UAAU,CAAC,IAAI,CAAE,EAAE,CAAE,CAAC,IAAI,CAAE,EAAE,SAAS,EAAE,MAAM,EAAE,CAAE,EAAA;;wBAAzE,UAAU,GAAG,SAA4D;wBAC9D,qBAAM,OAAE,CAAC,QAAQ,CAAC,IAAI,CAAE,EAAE,CAAE,CAAC,IAAI,CAAE,EAAE,SAAS,EAAE,MAAM,EAAE,CAAE,EAAA;;wBAArE,QAAQ,GAAG,SAA0D;wBACtD,qBAAM,OAAE,CAAC,YAAY,CAAC,IAAI,CAAE,EAAE,CAAE,CAAC,IAAI,CAAE,EAAE,SAAS,EAAE,MAAM,EAAE,CAAE,EAAA;;wBAA7E,YAAY,GAAG,SAA8D;wBAEnF,sBAAO;gCACN,UAAU,EAAE,+BAAW,CAAC,EAAE;gCAC1B,IAAI,EAAE;oCACL,IAAI,EAAE;wCACL,MAAM,EAAE,MAAM,CAAC,MAAM;wCACrB,UAAU,EAAE,UAAU,CAAC,MAAM;wCAC7B,QAAQ,EAAE,QAAQ,CAAC,MAAM;wCACzB,YAAY,EAAE,YAAY,CAAC,MAAM;qCACjC;oCACD,OAAO,EAAE,sCAAsC;iCAC/C;6BACD,EAAC;;;wBAEF,sBAAO;gCACN,UAAU,EAAE,+BAAW,CAAC,qBAAqB;gCAC7C,IAAI,EAAE;oCACL,IAAI,EAAE,OAAK;oCACX,OAAO,EAAE,qBAAqB;iCAC9B;6BACD,EAAC;;;;;KAEH,CAAC;AACH,CAAC;AAhCD,kCAgCC","sourcesContent":["import { HTTPRequest } from '../../adapters/express-callback';\r\nimport { StatusCodes } from 'http-status-codes';\r\nimport { db } from '../../db';\r\n\r\nexport function getOverview() {\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\treturn async function ( _: HTTPRequest<object, object, object> ) {\r\n\t\ttry {\r\n\r\n\t\t\tconst admins = await db.admins.find( {} ).sort( { createdAt: \"desc\" } )\r\n\t\t\tconst caregivers = await db.caregivers.find( {} ).sort( { createdAt: \"desc\" } )\r\n\t\t\tconst patients = await db.patients.find( {} ).sort( { createdAt: \"desc\" } )\r\n\t\t\tconst appointments = await db.appointments.find( {} ).sort( { createdAt: \"desc\" } )\r\n\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tadmins: admins.length,\r\n\t\t\t\t\t\tcaregivers: caregivers.length,\r\n\t\t\t\t\t\tpatients: patients.length,\r\n\t\t\t\t\t\tappointments: appointments.length,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmessage: 'successfully returned stats overview',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t} catch ( error ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.INTERNAL_SERVER_ERROR,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tdata: error,\r\n\t\t\t\t\tmessage: 'failed to get stats',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}\r\n"]}