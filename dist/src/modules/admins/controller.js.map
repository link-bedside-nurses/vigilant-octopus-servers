{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../../../src/modules/admins/controller.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\r\nimport { HTTPRequest } from '../../adapters/express-callback'\r\nimport { StatusCodes } from 'http-status-codes'\r\nimport { db } from '../../db'\r\n\r\nexport function getAllAdmins() {\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\treturn async function ( _: HTTPRequest<object> ) {\r\n\t\tconst admins = await db.admins.find( {} ).sort( { createdAt: \"desc\" } )\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: admins,\r\n\t\t\t\tmessage: 'Admins Retrieved',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getAdmin() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tconst admin = await db.admins.findById( request.params.id )\r\n\r\n\t\tif ( !admin ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No admin Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: admin,\r\n\t\t\t\tmessage: 'Admin Retrieved',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function banAdmin() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tif ( request.account?.id === request.params.id ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.BAD_REQUEST,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'You cannot ban yourself, Please select a different admin to ban',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst updatedAmin = await db.admins.findByIdAndUpdate(\r\n\t\t\trequest.params.id,\r\n\t\t\t{ $set: { isBanned: true } },\r\n\t\t\t{ new: true },\r\n\t\t)\r\n\t\tif ( !updatedAmin ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No admin Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: updatedAmin,\r\n\t\t\t\tmessage: 'Admin banned',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function banCaregiver() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tconst bannedCaregiver = await db.caregivers.findByIdAndUpdate(\r\n\t\t\trequest.params.id,\r\n\t\t\t{ $set: { isBanned: true } },\r\n\t\t\t{ new: true },\r\n\t\t)\r\n\t\tif ( !bannedCaregiver ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No such caregiver Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: bannedCaregiver,\r\n\t\t\t\tmessage: 'Caregiver Successfully banned from using the application',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\nexport function banPatient() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tconst bannedPatient = await db.patients.findByIdAndUpdate(\r\n\t\t\trequest.params.id,\r\n\t\t\t{ $set: { isBanned: true } },\r\n\t\t\t{ new: true },\r\n\t\t)\r\n\t\tif ( !bannedPatient ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No such patient Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: bannedPatient,\r\n\t\t\t\tmessage: 'Patient Successfully banned from using the application!',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function verifyCaregiver() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tconst verifiedCaregiver = await db.caregivers.findByIdAndUpdate(\r\n\t\t\trequest.params.id,\r\n\t\t\t{ isVerified: true },\r\n\t\t\t{ new: true },\r\n\t\t)\r\n\t\tif ( !verifiedCaregiver ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No such caregiver Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: verifiedCaregiver,\r\n\t\t\t\tmessage: 'Caregiver verified',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function verifyPatient() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tconst verifiedPatient = await db.patients.findByIdAndUpdate(\r\n\t\t\trequest.params.id,\r\n\t\t\t{ isVerified: true },\r\n\t\t\t{ new: true },\r\n\t\t)\r\n\t\tif ( !verifiedPatient ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No such patient Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: verifiedPatient,\r\n\t\t\t\tmessage: 'Patient verified!',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\ninterface UpdateBody {\r\n\tphone: string\r\n\tfirstName: string\r\n\tlastName: string\r\n}\r\n\r\nexport function updateAdmin() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<\r\n\t\t\t{\r\n\t\t\t\tid: string\r\n\t\t\t},\r\n\t\t\tUpdateBody\r\n\t\t>,\r\n\t) {\r\n\t\tconst admin = await db.admins.findByIdAndUpdate( request.params.id, { ...request.body }, { new: true } )\r\n\r\n\t\tif ( !admin ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No admin Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: admin,\r\n\t\t\t\tmessage: 'Admin updated',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n"]}