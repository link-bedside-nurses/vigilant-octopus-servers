{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../../../src/modules/profile/controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,uDAA+C;AAC/C,+BAA6B;AAE7B,SAAgB,wBAAwB;IACvC,OAAO,UACN,OAuBC;;;;;;;wBAEK,WAAW,GAAG,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,0CAAE,EAAE,CAAA;wBAClC,KAgBF,OAAO,CAAC,IAAI,EAff,KAAK,WAAA,EACL,SAAS,eAAA,EACT,QAAQ,cAAA,EACR,WAAW,iBAAA,EACX,GAAG,SAAA,EACH,oBAAoB,0BAAA,EACpB,UAAU,gBAAA,EACV,WAAW,iBAAA,EACX,QAAQ,cAAA,EACR,SAAS,eAAA,EACT,YAAY,kBAAA,EACZ,gBAAgB,sBAAA,EAChB,UAAU,gBAAA,EACV,eAAe,qBAAA,EACf,QAAQ,cAAA,CACO;wBAEhB,IACC,CAAC,WAAW;4BACZ,CAAC,KAAK;4BACN,CAAC,SAAS;4BACV,CAAC,QAAQ;4BACT,CAAC,WAAW;4BACZ,CAAC,GAAG;4BACJ,CAAC,oBAAoB;4BACrB,CAAC,UAAU;4BACX,CAAC,WAAW;4BACZ,CAAC,QAAQ;4BACT,CAAC,SAAS;4BACV,CAAC,YAAY;4BACb,CAAC,gBAAgB;4BACjB,CAAC,UAAU;4BACX,CAAC,eAAe;4BAChB,CAAC,QAAQ,EACR,CAAC;4BACF,sBAAO;oCACN,UAAU,EAAE,+BAAW,CAAC,WAAW;oCACnC,IAAI,EAAE;wCACL,IAAI,EAAE,IAAI;wCACV,OAAO,EAAE,oCAAoC;qCAC7C;iCACD,EAAA;wBACF,CAAC;wBAEwB,qBAAM,OAAE,CAAC,UAAU,CAAC,iBAAiB,CAC7D,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,0CAAE,EAAE,EACpB;gCACC,KAAK,OAAA;gCACL,SAAS,WAAA;gCACT,QAAQ,UAAA;gCACR,WAAW,aAAA;gCACX,GAAG,KAAA;gCACH,oBAAoB,sBAAA;gCACpB,UAAU,YAAA;gCACV,WAAW,aAAA;gCACX,QAAQ,UAAA;gCACR,SAAS,WAAA;gCACT,YAAY,cAAA;gCACZ,gBAAgB,kBAAA;gCAChB,UAAU,YAAA;gCACV,eAAe,iBAAA;gCACf,QAAQ,UAAA;6BACR,EACD,EAAE,GAAG,EAAE,IAAI,EAAE,CACb,EAAA;;wBApBK,gBAAgB,GAAG,SAoBxB;wBAED,sBAAO;gCACN,UAAU,EAAE,+BAAW,CAAC,EAAE;gCAC1B,IAAI,EAAE;oCACL,IAAI,EAAE,gBAAgB;oCACtB,OAAO,EAAE,mBAAmB;iCAC5B;6BACD,EAAA;;;;KACD,CAAA;AACF,CAAC;AAvGD,4DAuGC","sourcesContent":["import { HTTPRequest } from '../../adapters/express-callback'\r\nimport { StatusCodes } from 'http-status-codes'\r\nimport { db } from '../../db'\r\n\r\nexport function completeCaregiverProfile() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<\r\n\t\t\tobject,\r\n\t\t\t{\r\n\t\t\t\tphone: string\r\n\t\t\t\tfirstName: string\r\n\t\t\t\tlastName: string\r\n\t\t\t\tdateOfBirth: string\r\n\t\t\t\tnin: string\r\n\t\t\t\tmedicalLicenseNumber: string\r\n\t\t\t\texperience: string\r\n\t\t\t\tdescription: string\r\n\t\t\t\tlocation: {\r\n\t\t\t\t\tlng: number\r\n\t\t\t\t\tlat: number\r\n\t\t\t\t}\r\n\t\t\t\tlanguages: string[]\r\n\t\t\t\taffiliations: string\r\n\t\t\t\tplaceOfReception: string\r\n\t\t\t\trating: number\r\n\t\t\t\tspeciality: string\r\n\t\t\t\tservicesOffered: string\r\n\t\t\t\timageUrl: string\r\n\t\t\t}\r\n\t\t>,\r\n\t) {\r\n\t\tconst caregiverId = request?.account?.id\r\n\t\tconst {\r\n\t\t\tphone,\r\n\t\t\tfirstName,\r\n\t\t\tlastName,\r\n\t\t\tdateOfBirth,\r\n\t\t\tnin,\r\n\t\t\tmedicalLicenseNumber,\r\n\t\t\texperience,\r\n\t\t\tdescription,\r\n\t\t\tlocation,\r\n\t\t\tlanguages,\r\n\t\t\taffiliations,\r\n\t\t\tplaceOfReception,\r\n\t\t\tspeciality,\r\n\t\t\tservicesOffered,\r\n\t\t\timageUrl,\r\n\t\t} = request.body\r\n\r\n\t\tif (\r\n\t\t\t!caregiverId ||\r\n\t\t\t!phone ||\r\n\t\t\t!firstName ||\r\n\t\t\t!lastName ||\r\n\t\t\t!dateOfBirth ||\r\n\t\t\t!nin ||\r\n\t\t\t!medicalLicenseNumber ||\r\n\t\t\t!experience ||\r\n\t\t\t!description ||\r\n\t\t\t!location ||\r\n\t\t\t!languages ||\r\n\t\t\t!affiliations ||\r\n\t\t\t!placeOfReception ||\r\n\t\t\t!speciality ||\r\n\t\t\t!servicesOffered ||\r\n\t\t\t!imageUrl\r\n\t\t) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.BAD_REQUEST,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t\tmessage: 'Incomplete or invalid request data',\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst updatedCaregiver = await db.caregivers.findByIdAndUpdate(\r\n\t\t\trequest?.account?.id,\r\n\t\t\t{\r\n\t\t\t\tphone,\r\n\t\t\t\tfirstName,\r\n\t\t\t\tlastName,\r\n\t\t\t\tdateOfBirth,\r\n\t\t\t\tnin,\r\n\t\t\t\tmedicalLicenseNumber,\r\n\t\t\t\texperience,\r\n\t\t\t\tdescription,\r\n\t\t\t\tlocation,\r\n\t\t\t\tlanguages,\r\n\t\t\t\taffiliations,\r\n\t\t\t\tplaceOfReception,\r\n\t\t\t\tspeciality,\r\n\t\t\t\tservicesOffered,\r\n\t\t\t\timageUrl,\r\n\t\t\t},\r\n\t\t\t{ new: true },\r\n\t\t)\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: updatedCaregiver,\r\n\t\t\t\tmessage: 'Profile completed',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n"]}