{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../../../src/modules/payments/controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,uDAA+C;AAC/C,+BAA6B;AAE7B,SAAgB,cAAc;IAC7B,6DAA6D;IAC7D,OAAO,UAAiB,CAAsB;;;;;4BAC5B,qBAAM,OAAE,CAAC,QAAQ,CAAC,IAAI,CAAE,EAAE,CAAE,CAAC,IAAI,CAAE,EAAE,SAAS,EAAE,MAAM,EAAE,CAAE,EAAA;;wBAArE,QAAQ,GAAG,SAA0D;wBAC3E,sBAAO;gCACN,UAAU,EAAE,+BAAW,CAAC,EAAE;gCAC1B,IAAI,EAAE;oCACL,IAAI,EAAE,QAAQ;oCACd,OAAO,EAAE,oBAAoB;iCAC7B;6BACD,EAAA;;;;KACD,CAAA;AACF,CAAC;AAZD,wCAYC;AAED,SAAgB,UAAU;IACzB,OAAO,UACN,OAEE;;;;;4BAEc,qBAAM,OAAE,CAAC,QAAQ,CAAC,QAAQ,CAAE,OAAO,CAAC,MAAM,CAAC,EAAE,CAAE,EAAA;;wBAAzD,OAAO,GAAG,SAA+C;wBAE/D,IAAK,CAAC,OAAO,EAAG,CAAC;4BAChB,sBAAO;oCACN,UAAU,EAAE,+BAAW,CAAC,SAAS;oCACjC,IAAI,EAAE;wCACL,OAAO,EAAE,kBAAkB;wCAC3B,IAAI,EAAE,IAAI;qCACV;iCACD,EAAA;wBACF,CAAC;wBAED,sBAAO;gCACN,UAAU,EAAE,+BAAW,CAAC,EAAE;gCAC1B,IAAI,EAAE;oCACL,IAAI,EAAE,OAAO;oCACb,OAAO,EAAE,mBAAmB;iCAC5B;6BACD,EAAA;;;;KACD,CAAA;AACF,CAAC;AA1BD,gCA0BC;AAED,SAAgB,gBAAgB;IAC/B,OAAO,UACN,OAEE;;;;;4BAEc,qBAAM,OAAE,CAAC,QAAQ,CAAC,iBAAiB,CAAE,OAAO,CAAC,MAAM,CAAC,EAAE,CAAE,EAAA;;wBAAlE,OAAO,GAAG,SAAwD;wBAExE,IAAK,CAAC,OAAO,EAAG,CAAC;4BAChB,sBAAO;oCACN,UAAU,EAAE,+BAAW,CAAC,SAAS;oCACjC,IAAI,EAAE;wCACL,OAAO,EAAE,kBAAkB;wCAC3B,IAAI,EAAE,IAAI;qCACV;iCACD,EAAA;wBACF,CAAC;wBAED,sBAAO;gCACN,UAAU,EAAE,+BAAW,CAAC,EAAE;gCAC1B,IAAI,EAAE;oCACL,IAAI,EAAE,OAAO;oCACb,OAAO,EAAE,iBAAiB;iCAC1B;6BACD,EAAA;;;;KACD,CAAA;AACF,CAAC;AA1BD,4CA0BC","sourcesContent":["import { HTTPRequest } from '../../adapters/express-callback'\r\nimport { StatusCodes } from 'http-status-codes'\r\nimport { db } from '../../db'\r\n\r\nexport function getAllPayments() {\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\treturn async function ( _: HTTPRequest<object> ) {\r\n\t\tconst payments = await db.payments.find( {} ).sort( { createdAt: \"desc\" } )\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: payments,\r\n\t\t\t\tmessage: 'Payments Retrieved',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getPayment() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tconst payment = await db.payments.findById( request.params.id )\r\n\r\n\t\tif ( !payment ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No Payment Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: payment,\r\n\t\t\t\tmessage: 'Payment Retrieved',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function makeMomoPayement() {\r\n\treturn async function (\r\n\t\trequest: HTTPRequest<{\r\n\t\t\tid: string\r\n\t\t}>,\r\n\t) {\r\n\t\tconst payment = await db.payments.findByIdAndDelete( request.params.id )\r\n\r\n\t\tif ( !payment ) {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.NOT_FOUND,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tmessage: 'No Payment Found',\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: payment,\r\n\t\t\t\tmessage: 'Payment deleted',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n"]}