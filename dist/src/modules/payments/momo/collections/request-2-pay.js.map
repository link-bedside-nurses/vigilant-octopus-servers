{"version":3,"file":"request-2-pay.js","sourceRoot":"","sources":["../../../../../../src/modules/payments/momo/collections/request-2-pay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mDAA8D;AAC9D,gDAA0B;AAC1B,6BAAoC;AAEpC,SAA8B,WAAW,CAAE,KAAa,EAAE,MAAc,EAAE,OAAe;;;;;;oBAE/E,YAAY,GAAG,IAAA,SAAM,GAAE,CAAC;oBAExB,IAAI,GAAG;wBACT,QAAQ,EAAE,MAAM;wBAChB,UAAU,EAAE,MAAM;wBAClB,YAAY,EAAE,WAAW;wBACzB,OAAO,EAAE;4BACL,aAAa,EAAE,QAAQ;4BACvB,SAAS,EAAE,OAAO;yBACrB;wBACD,cAAc,EAAE,gBAAgB;wBAChC,WAAW,EAAE,qBAAqB;qBACrC,CAAA;oBAEK,MAAM,GAAG;wBACX,MAAM,EAAE,MAAM;wBACd,aAAa,EAAE,QAAQ;wBACvB,GAAG,EAAE,UAAG,gBAAI,CAAC,YAAY,kCAA+B;wBACxD,OAAO,EAAE;4BACL,gBAAgB,EAAE,YAAY;4BAC9B,sBAAsB,EAAE,SAAS;4BACjC,2BAA2B,EAAE,2BAAe,CAAC,yBAAyB,EAAE;4BACxE,eAAe,EAAE,iBAAU,KAAK,CAAE;yBACrC;wBACD,IAAI,EAAE,IAAI;qBACb,CAAC;oBAEK,qBAAM,eAAK,CAAC,OAAO,CAAE,MAAM,CAAE,EAAA;wBAApC,sBAAO,SAA6B,EAAA;;;;CACvC;AA9BD,8BA8BC","sourcesContent":["import { EnvironmentVars, uris } from '../../../../constants';\r\nimport axios from 'axios';\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport default async function makeReq2Pay( token: string, amount: string, partyId: string ) {\r\n\r\n    const xReferenceId = uuidv4();\r\n\r\n    const data = {\r\n        \"amount\": amount,\r\n        \"currency\": \"EURO\",\r\n        \"externalId\": \"097411115\",\r\n        \"payer\": {\r\n            \"partyIdType\": \"MSISDN\",\r\n            \"partyId\": partyId\r\n        },\r\n        \"payerMessage\": \"Test payment 2\",\r\n        \"payeeNote\": \"Test payment Note 2\"\r\n    }\r\n\r\n    const config = {\r\n        method: 'post',\r\n        maxBodyLength: Infinity,\r\n        url: `${uris.momo_sandbox}/collection/v1_0/requesttopay`,\r\n        headers: {\r\n            'X-Reference-Id': xReferenceId,\r\n            'X-Target-Environment': 'sandbox',\r\n            'Ocp-Apim-Subscription-Key': EnvironmentVars.getOcpApimSubscriptionKey(),\r\n            'Authorization': `Bearer ${token}`\r\n        },\r\n        data: data\r\n    };\r\n\r\n    return await axios.request( config )\r\n}\r\n"]}