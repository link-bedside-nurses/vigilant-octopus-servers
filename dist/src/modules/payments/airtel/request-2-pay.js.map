{"version":3,"file":"request-2-pay.js","sourceRoot":"","sources":["../../../../../src/modules/payments/airtel/request-2-pay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA0C;AAC1C,gDAA0B;AAC1B,6BAAmC;AAEnC,SAA8B,WAAW,CAAE,KAAa,EAAE,MAAc,EAAE,MAAc;;;;;;oBAE9E,EAAE,GAAG,IAAA,SAAK,GAAE,CAAA;oBAEZ,IAAI,GAAG,IAAI,CAAC,SAAS,CAAE;wBACzB,WAAW,EAAE,UAAG,MAAM,mBAAS,MAAM,CAAE;wBACvC,YAAY,EAAE;4BACV,SAAS,EAAE,IAAI;4BACf,UAAU,EAAE,KAAK;4BACjB,QAAQ,EAAE,MAAM;yBACnB;wBACD,aAAa,EAAE;4BACX,QAAQ,EAAE,MAAM;4BAChB,SAAS,EAAE,IAAI;4BACf,UAAU,EAAE,KAAK;4BACjB,IAAI,EAAE,EAAE;yBACX;qBACJ,CAAE,CAAC;oBAEE,MAAM,GAAG;wBACX,MAAM,EAAE,MAAM;wBACd,aAAa,EAAE,QAAQ;wBACvB,GAAG,EAAE,UAAG,gBAAI,CAAC,MAAM,0BAAuB;wBAC1C,OAAO,EAAE;4BACL,cAAc,EAAE,kBAAkB;4BAClC,QAAQ,EAAE,KAAK;4BACf,WAAW,EAAE,IAAI;4BACjB,eAAe,EAAE,iBAAU,KAAK,CAAE;4BAClC,QAAQ,EAAE,sFAAsF;yBACnG;wBACD,IAAI,EAAE,IAAI;qBACb,CAAC;oBAEK,qBAAM,eAAK,CAAC,OAAO,CAAE,MAAM,CAAE,EAAA;wBAApC,sBAAO,SAA6B,EAAA;;;;CACvC;AAlCD,8BAkCC","sourcesContent":["import { uris } from '../../../constants';\r\nimport axios from 'axios';\r\nimport { v4 as uuid4 } from 'uuid';\r\n\r\nexport default async function makeReq2Pay( token: string, msisdn: string, amount: number ) {\r\n\r\n    const id = uuid4()\r\n\r\n    const data = JSON.stringify( {\r\n        \"reference\": `${amount} from ${msisdn}`,\r\n        \"subscriber\": {\r\n            \"country\": \"UG\",\r\n            \"currency\": \"UGX\",\r\n            \"msisdn\": msisdn\r\n        },\r\n        \"transaction\": {\r\n            \"amount\": amount,\r\n            \"country\": \"UG\",\r\n            \"currency\": \"UGX\",\r\n            \"id\": id\r\n        }\r\n    } );\r\n\r\n    const config = {\r\n        method: 'post',\r\n        maxBodyLength: Infinity,\r\n        url: `${uris.airtel}/merchant/v1/payments`,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': '*/*',\r\n            'X-Country': 'UG',\r\n            'Authorization': `Bearer ${token}`,\r\n            'Cookie': 'visid_incap_2967769=x+0O2DxzRu+kAN3M8iwXEEQjV2UAAAAAQUIPAAAAAACQZlONmE25iPK70yNTOqwi'\r\n        },\r\n        data: data\r\n    };\r\n\r\n    return await axios.request( config )\r\n}\r\n"]}