{"version":3,"file":"request-2-pay.js","sourceRoot":"","sources":["../../../../../src/modules/payments/airtel/request-2-pay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA0C;AAC1C,gDAA0B;AAC1B,6BAAmC;AAEnC,SAA8B,WAAW,CAAE,KAAa,EAAE,MAAc,EAAE,MAAc;;;;;;oBAE9E,EAAE,GAAG,IAAA,SAAK,GAAE,CAAA;oBAEZ,IAAI,GAAG,IAAI,CAAC,SAAS,CAAE;wBACzB,WAAW,EAAE,UAAG,MAAM,mBAAS,MAAM,CAAE;wBACvC,YAAY,EAAE;4BACV,SAAS,EAAE,IAAI;4BACf,UAAU,EAAE,KAAK;4BACjB,QAAQ,EAAE,MAAM;yBACnB;wBACD,aAAa,EAAE;4BACX,QAAQ,EAAE,MAAM;4BAChB,SAAS,EAAE,IAAI;4BACf,UAAU,EAAE,KAAK;4BACjB,IAAI,EAAE,EAAE;yBACX;qBACJ,CAAE,CAAC;oBAEE,MAAM,GAAG;wBACX,MAAM,EAAE,MAAM;wBACd,aAAa,EAAE,QAAQ;wBACvB,GAAG,EAAE,UAAG,gBAAI,CAAC,MAAM,0BAAuB;wBAC1C,OAAO,EAAE;4BACL,cAAc,EAAE,kBAAkB;4BAClC,QAAQ,EAAE,KAAK;4BACf,WAAW,EAAE,IAAI;4BACjB,eAAe,EAAE,iBAAU,KAAK,CAAE;4BAClC,QAAQ,EAAE,sFAAsF;yBACnG;wBACD,IAAI,EAAE,IAAI;qBACb,CAAC;oBAEK,qBAAM,eAAK,CAAC,OAAO,CAAE,MAAM,CAAE,EAAA;wBAApC,sBAAO,SAA6B,EAAA;;;;CACvC;AAlCD,8BAkCC","sourcesContent":["import { uris } from '../../../constants';\nimport axios from 'axios';\nimport { v4 as uuid4 } from 'uuid';\n\nexport default async function makeReq2Pay( token: string, msisdn: string, amount: number ) {\n\n    const id = uuid4()\n\n    const data = JSON.stringify( {\n        \"reference\": `${amount} from ${msisdn}`,\n        \"subscriber\": {\n            \"country\": \"UG\",\n            \"currency\": \"UGX\",\n            \"msisdn\": msisdn\n        },\n        \"transaction\": {\n            \"amount\": amount,\n            \"country\": \"UG\",\n            \"currency\": \"UGX\",\n            \"id\": id\n        }\n    } );\n\n    const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: `${uris.airtel}/merchant/v1/payments`,\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': '*/*',\n            'X-Country': 'UG',\n            'Authorization': `Bearer ${token}`,\n            'Cookie': 'visid_incap_2967769=x+0O2DxzRu+kAN3M8iwXEEQjV2UAAAAAQUIPAAAAAACQZlONmE25iPK70yNTOqwi'\n        },\n        data: data\n    };\n\n    return await axios.request( config )\n}\n"]}