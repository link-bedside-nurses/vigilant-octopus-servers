{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../../../src/modules/me/controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,uDAA+C;AAC/C,+BAA6B;AAC7B,8DAA2D;AAE3D,SAAgB,cAAc;IAC7B,OAAO,UAAiB,OAA4B;;;;;;;wBAC7C,WAAW,GAAG,MAAA,OAAO,CAAC,OAAO,0CAAE,WAAW,CAAA;6BAG3C,CAAA,WAAW,KAAK,0BAAW,CAAC,KAAK,CAAA,EAAjC,wBAAiC;wBAC9B,qBAAM,OAAE,CAAC,UAAU,CAAC,QAAQ,CAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,EAAE,CAAE,EAAA;;wBAA1D,IAAI,GAAG,SAAmD,CAAA;;;6BAC/C,CAAA,WAAW,KAAK,0BAAW,CAAC,OAAO,CAAA,EAAnC,wBAAmC;wBACvC,qBAAM,OAAE,CAAC,QAAQ,CAAC,QAAQ,CAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,EAAE,CAAE,EAAA;;wBAAxD,IAAI,GAAG,SAAiD,CAAA;;;6BAC7C,CAAA,WAAW,KAAK,0BAAW,CAAC,KAAK,CAAA,EAAjC,wBAAiC;wBACrC,qBAAM,OAAE,CAAC,MAAM,CAAC,QAAQ,CAAE,MAAA,OAAO,CAAC,OAAO,0CAAE,EAAE,CAAE,EAAA;;wBAAtD,IAAI,GAAG,SAA+C,CAAA;;4BAEtD,sBAAO;4BACN,UAAU,EAAE,+BAAW,CAAC,WAAW;4BACnC,IAAI,EAAE;gCACL,IAAI,EAAE,IAAI;gCACV,OAAO,EAAE,qBAAqB;6BAC9B;yBACD,EAAA;4BAGF,sBAAO;4BACN,UAAU,EAAE,+BAAW,CAAC,EAAE;4BAC1B,IAAI,EAAE;gCACL,IAAI,EAAE,IAAI;gCACV,OAAO,EAAE,gBAAgB;6BACzB;yBACD,EAAA;;;;KACD,CAAA;AACF,CAAC;AA7BD,wCA6BC","sourcesContent":["import { HTTPRequest } from '../../adapters/express-callback'\r\nimport { StatusCodes } from 'http-status-codes'\r\nimport { db } from '../../db'\r\nimport { DESIGNATION } from '../../interfaces/designations'\r\n\r\nexport function getCurrentUser() {\r\n\treturn async function ( request: HTTPRequest<object> ) {\r\n\t\tconst designation = request.account?.designation\r\n\r\n\t\tlet user\r\n\t\tif ( designation === DESIGNATION.NURSE ) {\r\n\t\t\tuser = await db.caregivers.findById( request.account?.id )\r\n\t\t} else if ( designation === DESIGNATION.PATIENT ) {\r\n\t\t\tuser = await db.patients.findById( request.account?.id )\r\n\t\t} else if ( designation === DESIGNATION.ADMIN ) {\r\n\t\t\tuser = await db.admins.findById( request.account?.id )\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tstatusCode: StatusCodes.BAD_REQUEST,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t\tmessage: 'Invalid Designation',\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstatusCode: StatusCodes.OK,\r\n\t\t\tbody: {\r\n\t\t\t\tdata: user,\r\n\t\t\t\tmessage: 'User Retrieved',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n"]}