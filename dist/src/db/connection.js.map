{"version":3,"file":"connection.js","sourceRoot":"","sources":["../../../src/db/connection.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sDAAgC;AAEhC,2DAAqC;AACrC,0CAA+C;AAC/C,mCAOoB;AAEpB,0EAA0E;AAC1E,IAAM,uBAAuB,GAAG,2BAAe,CAAC,cAAc,EAAE,CAAC;AACjE,IAAM,aAAa,GAAG,2BAAe,CAAC,eAAe,EAAE,CAAC;AAExD,SAAsB,iBAAiB;;;;;;;oBAEZ,qBAAM,kBAAQ,CAAC,OAAO,CAAC,uBAAuB,EAAE;4BAC/D,MAAM,EAAE,aAAa;yBACxB,CAAC,EAAA;;oBAFI,UAAU,GAAG,SAEjB;oBAEF,gBAAM,CAAC,IAAI,CAAC,qBAAc,UAAU,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,CAAE,CAAC,CAAC;;;;oBAEnE,gBAAM,CAAC,KAAK,CAAC,OAAK,CAAC,CAAC;oBACpB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;;;;;CAEvB;AAXD,8CAWC;AAED,SAAsB,sBAAsB;;;;;;;yBAEhC,kBAAQ,CAAC,UAAU,CAAC,EAAE,EAAtB,wBAAsB;oBACtB,qBAAM,kBAAQ,CAAC,UAAU,CAAC,KAAK,EAAE,EAAA;;oBAAjC,SAAiC,CAAC;oBAClC,gBAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;;wBAEzC,sBAAO;;;oBAEP,gBAAM,CAAC,KAAK,CAAC,OAAK,EAAE,wBAAwB,CAAC,CAAC;;;;;;CAErD;AAVD,wDAUC;AAED,SAAsB,YAAY;;;;;;;oBAE1B,qBAAM,IAAA,qBAAc,GAAE,EAAA;;oBAAtB,SAAsB,CAAC;oBACvB,qBAAM,IAAA,iBAAU,GAAE,EAAA;;oBAAlB,SAAkB,CAAC;oBACnB,qBAAM,IAAA,mBAAY,GAAE,EAAA;;oBAApB,SAAoB,CAAC;oBACrB,qBAAM,IAAA,uBAAgB,GAAE,EAAA;;oBAAxB,SAAwB,CAAC;oBACzB,qBAAM,IAAA,kBAAW,GAAE,EAAA;;oBAAnB,SAAmB,CAAC;oBACpB,qBAAM,IAAA,mBAAY,GAAE,EAAA;;oBAApB,SAAoB,CAAC;oBAErB,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;;;;oBAEhD,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,OAAK,CAAC,CAAC;;;;;;CAEvD;AAbD,oCAaC;AAED,kBAAkB","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nimport logger from \"../utils/logger\";\r\nimport { EnvironmentVars } from \"../constants\";\r\nimport {\r\n    seedCaregivers,\r\n    seedPatients,\r\n    seedAdmins,\r\n    seedPayments,\r\n    seedAppointments,\r\n    seedRatings,\r\n} from \"../db/seed\";\r\n\r\n// const DATABASE_CONNECTION_URI_DEV = EnvironmentVars.getDevDatabaseUrl()\r\nconst DATABASE_CONNECTION_URI = EnvironmentVars.getDatabaseUrl();\r\nconst DATABASE_NAME = EnvironmentVars.getDatabaseName();\r\n\r\nexport async function connectToDatabase() {\r\n    try {\r\n        const connection = await mongoose.connect(DATABASE_CONNECTION_URI, {\r\n            dbName: DATABASE_NAME,\r\n        });\r\n\r\n        logger.info(`Connected: ${connection.connection.db.databaseName}`);\r\n    } catch (error) {\r\n        logger.error(error);\r\n        process.exit(1);\r\n    }\r\n}\r\n\r\nexport async function disconnectFromDatabase() {\r\n    try {\r\n        if (mongoose.connection.id) {\r\n            await mongoose.connection.close();\r\n            logger.info(\"disconnecting from db\");\r\n        }\r\n        return;\r\n    } catch (error) {\r\n        logger.error(error, \"Error disconnecting db\");\r\n    }\r\n}\r\n\r\nexport async function seedDatabase() {\r\n    try {\r\n        await seedCaregivers();\r\n        await seedAdmins();\r\n        await seedPatients();\r\n        await seedAppointments();\r\n        await seedRatings();\r\n        await seedPayments();\r\n\r\n        console.log(\"Seed data inserted successfully!\");\r\n    } catch (error) {\r\n        console.error(\"Error seeding database:\", error);\r\n    }\r\n}\r\n\r\n// seedDatabase();\r\n"]}